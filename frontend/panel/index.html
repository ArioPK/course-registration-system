<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>پنل مدیریت دروس</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.2.0/remixicon.css"
    />
    <link rel="stylesheet" href="panel.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/variables.css" />
  </head>
  <body>
    <div class="admin-container">
      <aside class="sidebar">
        <div class="sidebar-header">
          <img src="../logo/logo-3.png" alt="لوگو" />
          <h3>پنل مدیریت دروس</h3>
        </div>
        <nav class="sidebar-nav">
          <ul>
            <li>
              <a
                href="#"
                class="nav-link active"
                data-target="course-management"
              >
                <i class="ri-book-open-line"></i> مدیریت دروس
              </a>
            </li>
          </ul>
          <li>
      <a
        href="#"
        class="nav-link"
        data-target="prerequisite-management"
      >
        <i class="ri-flow-chart"></i> مدیریت پیش‌نیازها
      </a>
    </li>
    <li>
      <a
        href="#"
        class="nav-link"
        data-target="prerequisite-management"
      >
        <i class="ri-flow-chart"></i> مدیریت پیش‌نیازها
      </a>
    </li>
    </ul>
        </nav>
        <div class="sidebar-footer">
          <a href="../index.html" class="site-link" target="_blank">
            <i class="ri-external-link-line"></i> مشاهده سایت اصلی
          </a>
          <a href="#" id="logout-btn">
            <i class="ri-logout-box-r-line"></i> خروج
          </a>
        </div>
      </aside>

      <main class="main-content">
        <section id="course-management" class="management-section active">
          <header class="section-header">
            <h1>مدیریت دروس</h1>
            <div class="header-actions">
              <div class="search-box">
                <i class="ri-search-line"></i>
                <input type="text" id="course-search" placeholder="جستجوی درس..." />
              </div>
              <select id="filter-department" class="filter-select">
                <option value="">همه رشته‌ها</option>
              </select>
              <select id="filter-semester" class="filter-select">
                <option value="">همه ترم‌ها</option>
              </select>
              <button type="button" class="add-new-btn" id="add-course-btn">
                <i class="ri-add-line"></i> افزودن درس جدید
              </button>
            </div>
          </header>
          <div class="courses-summary">
            <div class="summary-card">
              <i class="ri-book-line"></i>
              <div>
                <span class="summary-label">تعداد کل دروس</span>
                <span class="summary-value" id="total-courses">0</span>
              </div>
            </div>
            <div class="summary-card">
              <i class="ri-group-line"></i>
              <div>
                <span class="summary-label">کل ظرفیت</span>
                <span class="summary-value" id="total-capacity">0</span>
              </div>
            </div>
            <div class="summary-card">
              <i class="ri-user-line"></i>
              <div>
                <span class="summary-label">کل ثبت‌نام‌ها</span>
                <span class="summary-value" id="total-enrolled">0</span>
              </div>
            </div>
          </div>
          <div class="content-table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>کد درس</th>
                  <th>نام درس</th>
                  <th>واحد</th>
                  <th>رشته</th>
                  <th>ترم</th>
                  <th>استاد</th>     <th>زمان</th>      <th>مکان</th>      <th>ظرفیت</th>
                  <th>ثبت‌نام</th>   <th>عملیات</th>
                </tr>
              </thead>
              <tbody id="courses-table-body"></tbody>
            </table>
          </div>
        </section>
        <section id="prerequisite-management" class="management-section">
          <header class="section-header">
            <h1>مدیریت پیش‌نیازهای دروس</h1>
            <div class="header-actions">
              <button
                type="button"
                class="add-new-btn"
                id="open-prereq-modal-btn"
              >
                <i class="ri-add-line"></i> افزودن پیش‌نیاز جدید
              </button>
            </div>
          </header>
        
          <div class="content-table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>درس هدف (Target Course)</th>
                  <th>کد درس هدف</th>
                  <th>پیش‌نیاز (Prerequisite Course)</th>
                  <th>کد پیش‌نیاز</th>
                  <th style="width: 100px;">عملیات</th>
                </tr>
              </thead>
              <tbody id="prerequisites-table-body">
                </tbody>
            </table>
          </div>
        </section>
      </main>
    </div>

    <div class="modal-backdrop" id="course-modal">
      <div class="modal">
        <button type="button" class="modal-close-btn" aria-label="بستن"><i class="ri-close-line"></i></button>
        <form id="course-form">
          <h3 id="course-modal-title">افزودن درس جدید</h3>
          <div class="form-group">
            <label for="course-code">کد درس</label>
            <input type="text" id="course-code" name="code" required placeholder="مثال: CS101" />
          </div>
          <div class="form-group">
            <label for="course-name">نام درس</label>
            <input type="text" id="course-name" name="name" required placeholder="مثال: مبانی کامپیوتر" />
          </div>
          <div class="form-group">
            <label for="course-units">تعداد واحد</label>
            <input type="number" id="course-units" name="units" required min="1" max="4" placeholder="1-4" />
          </div>
          <div class="form-group">
            <label for="course-department">رشته</label>
            <input type="text" id="course-department" name="department" required placeholder="مثال: کامپیوتر" />
          </div>
          <div class="form-group">
            <label for="course-semester">ترم</label>
            <input type="text" id="course-semester" name="semester" required placeholder="مثال: 1403-1" />
          </div>
          <div class="form-group">
            <label for="course-capacity">ظرفیت</label>
            <input type="number" id="course-capacity" name="capacity" required min="1" placeholder="مثال: 40" />
          </div>
          <div class="form-group">
            <label for="course-professor">نام استاد</label>
            <input type="text" id="course-professor" name="professor_name" required placeholder="مثال: دکتر حسینی" />
          </div>
          
          <div class="form-group">
            <label for="course-day">روز برگزاری</label>
            <select id="course-day" name="day_of_week" class="form-select" required>
              <option value="">انتخاب کنید...</option>
              <option value="SAT">شنبه</option>
              <option value="SUN">یک‌شنبه</option>
              <option value="MON">دوشنبه</option>
              <option value="TUE">سه‌شنبه</option>
              <option value="WED">چهارشنبه</option>
              <option value="THU">پنج‌شنبه</option>
              <option value="FRI">جمعه</option>
            </select>
          </div>
          
          <div style="display: flex; gap: 10px;">
            <div class="form-group" style="flex: 1;">
              <label for="course-start">ساعت شروع</label>
              <input type="time" id="course-start" name="start_time" required />
            </div>
            <div class="form-group" style="flex: 1;">
              <label for="course-end">ساعت پایان</label>
              <input type="time" id="course-end" name="end_time" required />
            </div>
          </div>
          
          <div class="form-group">
            <label for="course-location">مکان برگزاری</label>
            <input type="text" id="course-location" name="location" required placeholder="مثال: کلاس ۱۰۱" />
          </div>
          <div class="modal-actions">
            <button type="submit" class="save-btn">ذخیره</button>
            <button type="button" class="cancel-btn" id="cancel-course-btn">انصراف</button>
          </div>
        </form>
      </div>
    </div>
    <div class="modal-backdrop" id="prerequisite-modal">
  <div class="modal">
    <button
      type="button"
      class="modal-close-btn"
      aria-label="بستن"
    >
      <i class="ri-close-line"></i>
    </button>
    <form id="prerequisite-form">
      <h3 id="prereq-modal-title">افزودن پیش‌نیاز جدید</h3>
      <p style="text-align: center; margin-bottom: 20px; color: var(--medium-grey);">یک درس را به عنوان پیش‌نیاز برای درس دیگر تعیین کنید.</p>

      <div class="form-group">
        <label for="target-course-id">درس هدف (که به پیش‌نیاز نیاز دارد)</label>
        <select id="target-course-id" name="target_course_id" class="form-select" required>
          <option value="">انتخاب کنید...</option>
          </select>
      </div>

      <div class="form-group">
        <label for="prerequisite-course-id">درس پیش‌نیاز (درسی که باید قبلاً پاس شده باشد)</label>
        <select id="prerequisite-course-id" name="prerequisite_course_id" class="form-select" required>
          <option value="">انتخاب کنید...</option>
          </select>
      </div>

      <div class="modal-actions">
        <button type="submit" class="save-btn" id="save-prereq-btn">ذخیره</button>
        <button type="button" class="cancel-btn modal-close-btn" id="cancel-prereq-btn">انصراف</button>
      </div>
    </form>
  </div>
</div>
    
    <div class="modal-backdrop" id="confirmation-modal">
      <div class="modal confirmation">
        <p id="confirmation-message">آیا از انجام این کار مطمئن هستید؟</p>
        <div class="modal-actions">
          <button type="button" id="confirm-btn" class="save-btn">تایید</button>
          <button type="button" id="cancel-btn" class="cancel-btn">انصراف</button>
        </div>
      </div>
    </div>

    <script type="module" src="../JS/main.js"></script>
  </body>
</html>
